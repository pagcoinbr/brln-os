<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #111;
      color: white;
      font-family: Arial, sans-serif;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 40px;
    }

    #radio-button {
      background-color: #00ffff;
      color: #111;
      border: none;
      padding: 8px 16px;
      font-weight: bold;
      cursor: pointer;
      margin-left: 10px;
      border-radius: 8px;
    }

    #radio-button:hover {
      background-color: #00cccc;
    }

    .marquee {
      flex: 1;
      overflow: hidden;
      white-space: nowrap;
      box-sizing: border-box;
      height: 100%;
      display: flex;
      align-items: center;
      margin-left: 10px;
    }

    .marquee-content {
      display: inline-block;
      padding-left: 100%;
      animation: marquee 15s linear infinite;
    }

    @keyframes marquee {
      0% { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }

    .marquee-content a {
      color: #00ffff;
      text-decoration: none;
      font-weight: bold;
    }

    .marquee-content a:hover {
      text-decoration: underline;
    }

    .version {
      margin-left: 30px;
      color: #fff;
      font-weight: bold;
    }

    audio {
      display: none;
    }

    .vol-control {
      background-color: #222;
      color: #00ffff;
      border: none;
      font-size: 18px;
      padding: 4px 10px;
      margin-left: 5px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
    }

    .vol-control:hover {
      background-color: #00cccc;
    }
  </style>
</head>
<body>
  <!-- Controles -->
  <div style="display: flex; align-items: center; height: 100%; padding-left: 10px;">
    <button id="radio-button">‚ñ∂Ô∏è R√°dio</button>
    <button class="vol-control" id="vol-down">‚àí</button>
    <button class="vol-control" id="vol-up">+</button>
  </div>

  <!-- Letreiro animado -->
  <div class="marquee">
    <div class="marquee-content">
      <a href="https://services.br-ln.com" target="_blank">‚ö° Clique aqui para acessar o site da BRLN. Junte-se a n√≥s!</a>
      <span class="version">| v1.0-beta</span>
    </div>
  </div>

  <!-- Player de √°udio invis√≠vel -->
  <audio id="radio-player" src="https://dc1.serverse.com/proxy/dnutqhxl/stream"></audio>

  <script>
    const player = document.getElementById('radio-player');
    const button = document.getElementById('radio-button');
    const volUp = document.getElementById('vol-up');
    const volDown = document.getElementById('vol-down');
  
    player.volume = 0.1;
  
    const jinglePlayer = new Audio();
    jinglePlayer.volume = 0.8;
  
    const intro = new Audio("intro.mp3");
    intro.volume = 0.8;
  
    const trechos = [
      "trecho1.mp3",
      "trecho2.mp3",
      "trecho3.mp3"
    ];
  
    let novidadesAtivas = false;
    let intervaloTrechos = null;
  
    function toggleRadio() {
      if (player.paused) {
        intro.play().then(() => {
          console.log("Intro iniciada");
          button.innerText = "‚è∏Ô∏è Parar";
        }).catch(() => {
          alert("Clique para ativar o som. O navegador pode estar a bloquear o autoplay.");
        });
  
        intro.addEventListener("ended", () => {
          player.play().then(() => {
            console.log("R√°dio iniciada");
          });
        });
  
      } else {
        player.pause();
        intro.pause();
        intro.currentTime = 0;
        button.innerText = "‚ñ∂Ô∏è R√°dio";
      }
    }
  
    function ajustarVolume(direcao) {
      let novoVolume = player.volume + (direcao === 'up' ? 0.1 : -0.1);
      novoVolume = Math.max(0, Math.min(1, novoVolume));
      player.volume = novoVolume;
      console.log("Volume atual:", Math.round(novoVolume * 100) + "%");
    }
  
    function tocarInterrupcao() {
      if (!player.paused) {
        const indice = Math.floor(Math.random() * trechos.length);
        const trechoSelecionado = trechos[indice];
        jinglePlayer.src = trechoSelecionado;
        player.pause();
        jinglePlayer.play().then(() => {
          console.log("Tocando novidade:", trechoSelecionado);
        });
      }
    }
  
    jinglePlayer.addEventListener("ended", () => {
      player.play().then(() => {
        console.log("R√°dio retomada");
      });
    });
  
    button.addEventListener('click', toggleRadio);
    volUp.addEventListener('click', () => ajustarVolume('up'));
    volDown.addEventListener('click', () => ajustarVolume('down'));
  
    // NOVO BOT√ÉO DE NOVIDADES (Agora com o √≠cone üì¢)
    const botaoNovidades = document.createElement("button");
    botaoNovidades.textContent = "üì¢";
    botaoNovidades.className = "vol-control";
    botaoNovidades.title = "Ativar/Desativar Novidades";
    button.parentNode.appendChild(botaoNovidades);
  
    botaoNovidades.addEventListener("click", () => {
      novidadesAtivas = !novidadesAtivas;
  
      if (novidadesAtivas) {
        // Toca o primeiro trecho imediatamente
        tocarInterrupcao();
  
        // Inicia o intervalo para os pr√≥ximos trechos ap√≥s 5 minutos
        intervaloTrechos = setInterval(tocarInterrupcao, 60000); // 1 minuto
        botaoNovidades.style.backgroundColor = "#006666"; // Ativo
        console.log("Novidades ativadas");
      } else {
        clearInterval(intervaloTrechos);
        botaoNovidades.style.backgroundColor = ""; // Reset
        console.log("Novidades desativadas");
      }
    });
  </script>
  
</body>
</html>

