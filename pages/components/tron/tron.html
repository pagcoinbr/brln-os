<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TRON Gas-Free Wallet</title>
  <link rel="stylesheet" href="../pages-style.css">
  <link rel="stylesheet" href="tron.css">
</head>
<body>
  <div class="page-container">
    <div class="tron-control">
      <!-- Wallet Address Section -->
      <section class="control-section">
        <h2>üì¨ Your Wallet Address</h2>
        <div class="wallet-address-container">
          <div class="address-display show">
            <div class="address-info">
              <div class="generated-address-container">
                <div class="generated-address" id="walletAddress">Loading...</div>
                <button class="copy-button" onclick="copyAddress()" title="Copy Address">üìã</button>
              </div>
              <div class="balance-container">
                <div class="balance-item">
                  <span class="balance-label">USDT Balance:</span>
                  <span class="balance-value" id="usdtBalance">0.00</span>
                </div>
              </div>
            </div>
            <div class="qr-container">
              <canvas id="qrCode" class="qr-code"></canvas>
            </div>
          </div>
        </div>
        <div class="action-buttons">
          <button onclick="refreshBalance()" class="action-btn">üîÑ Refresh Balance</button>
        </div>
      </section>

      <!-- Send USDT Section -->
      <section class="control-section">
        <h2>üì§ Send USDT (Gas-Free)</h2>
        <form class="send-form" id="sendForm" onsubmit="sendUSDT(event)">
          <div class="form-group">
            <label for="recipientAddress">Recipient Address</label>
            <input 
              type="text" 
              id="recipientAddress" 
              placeholder="TRX address (starts with T)"
              required
              pattern="^T[A-Za-z1-9]{33}$"
              title="Must be a valid TRON address starting with T"
            />
          </div>
          
          <div class="form-group">
            <label for="amount">Amount (USDT)</label>
            <input 
              type="number" 
              id="amount" 
              placeholder="0.00"
              step="0.000001"
              min="1.01"
              required
            />
            <small class="fee-note">* Gas-free fee: 1 USDT (included in amount)</small>
          </div>

          <div class="form-group">
            <label for="password">Wallet Password</label>
            <input 
              type="password" 
              id="password" 
              placeholder="Enter wallet password"
              required
            />
          </div>

          <button type="submit" class="send-button" id="sendButton">
            <div class="service-card">
              <div class="service-title">Send USDT</div>
            </div>
          </button>
        </form>

        <div class="info-box">
          <h3>‚ÑπÔ∏è Gas-Free Transaction Info</h3>
          <ul>
            <li>This is your GasFree deposit address (not your regular TRON address)</li>
            <li>Send USDT to this address to use gas-free transfers</li>
            <li>Fixed fee: 10 USDT per transaction (first transaction activates account)</li>
            <li>No TRX needed for gas fees</li>
            <li>Transactions processed via GasFree protocol</li>
            <li>Minimum amount: 10.01 USDT (10 USDT fee + 0.01 USDT transfer)</li>
          </ul>
        </div>
      </section>

      <!-- Transaction History Section -->
      <section class="control-section">
        <h2>üìú Transaction History</h2>
        <div class="transactions-history" id="transactionHistory">
          <div class="transaction-header">
            <div>Date/Time</div>
            <div>Type</div>
            <div>Address</div>
            <div>Amount (USDT)</div>
            <div>Status</div>
          </div>
          <div class="loading-message">Loading transactions...</div>
        </div>
        <button onclick="refreshHistory()" class="action-btn">üîÑ Refresh History</button>
      </section>

      <!-- API Configuration Section -->
      <section class="control-section config-section">
        <h2>‚öôÔ∏è API Configuration</h2>
        <form class="config-form" id="configForm" onsubmit="saveConfig(event)">
          <div class="config-group">
            <h3>TRON Network Settings</h3>
            <div class="form-group">
              <label for="tronApiUrl">TRON API URL</label>
              <input 
                type="url" 
                id="tronApiUrl" 
                placeholder="https://api.trongrid.io"
                value="https://api.trongrid.io"
              />
            </div>
            
            <div class="form-group">
              <label for="tronApiKey">TronGrid API Key</label>
              <input 
                type="text" 
                id="tronApiKey" 
                placeholder="Your TronGrid API key"
              />
              <small>Get your free API key at <a href="https://www.trongrid.io" target="_blank">trongrid.io</a></small>
            </div>
          </div>

          <div class="config-group">
            <h3>Gas-Free Protocol Settings</h3>
            <small><a href="https://developer.gasfree.io/" target="_blank">Get your TRON GasFree API key and secret here</a></small>
            <div class="form-group">
              <label for="gasfreeApiKey">Gas-Free API Key</label>
              <input 
                type="text" 
                id="gasfreeApiKey" 
                placeholder="Your Gas-Free API key"
              />
            </div>
            
            <div class="form-group">
              <label for="gasfreeApiSecret">Gas-Free API Secret</label>
              <input 
                type="password" 
                id="gasfreeApiSecret" 
                placeholder="Your Gas-Free API secret"
              />
            </div>

            <div class="form-group">
              <label for="gasfreeEndpoint">Gas-Free Endpoint</label>
              <input 
                type="url" 
                id="gasfreeEndpoint" 
                placeholder="https://open.gasfree.io/tron/"
                value="https://open.gasfree.io/tron/"
              />
            </div>
          </div>

          <div class="form-group">
            <label for="configPassword">Wallet Password (to encrypt settings)</label>
            <input 
              type="password" 
              id="configPassword" 
              placeholder="Enter wallet password"
              required
            />
          </div>

          <button type="submit" class="action-btn config-save-btn">üíæ Save Configuration</button>
        </form>
        
        <button onclick="loadConfig()" class="action-btn">üì• Load Configuration</button>
      </section>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/qrious@4.0.2/dist/qrious.min.js"></script>
  <script src="tron.js"></script>
</body>
</html>
