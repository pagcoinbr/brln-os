<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Wallet - BRLN-OS</title>
    <link rel="stylesheet" href="../../home/index.css" />
    <link rel="stylesheet" href="../pages-style.css" />
    <link rel="stylesheet" href="../association-footer.css" />
    <link rel="stylesheet" href="wallet.css" />
    <!-- Note: Crypto libraries removed - now using secure API backend -->
  </head>
<body>

  <div class="wallet-control">

  <!-- Current Wallet Status -->
  <section class="content-section" id="currentWalletSection" style="display: none;">
    <div class="content-wrapper">
      <h2>Current Loaded Wallet</h2>
      <div class="current-wallet-card">
        <div class="wallet-info-display">
          <div class="wallet-name-row">
            <span class="wallet-label">Wallet Name:</span>
            <span id="currentWalletName" class="wallet-value">-</span>
          </div>
          <div class="wallet-id-row">
            <span class="wallet-label">Wallet ID:</span>
            <span id="currentWalletId" class="wallet-value">-</span>
          </div>
          <div class="wallet-created-row">
            <span class="wallet-label">Created:</span>
            <span id="currentWalletCreated" class="wallet-value">-</span>
          </div>
          <div class="wallet-networks-row">
            <span class="wallet-label">Available Networks:</span>
            <div id="currentWalletNetworks" class="wallet-networks">
              <span class="network-badge">Bitcoin</span>
              <span class="network-badge">Lightning</span>
              <span class="network-badge">Liquid</span>
            </div>
          </div>
          <div class="wallet-mnemonic-row" id="walletMnemonicRow" style="display: none;">
            <span class="wallet-label">âš ï¸ Seed Phrase (Mnemonic):</span>
            <div class="mnemonic-display-box" style="background: #fff3cd; padding: 15px; border-radius: 8px; border: 2px solid #ffc107; margin-top: 10px;">
              <p style="color: #856404; font-size: 12px; margin-bottom: 10px;"><strong>IMPORTANT:</strong> Keep this safe and never share it!</p>
              <code id="currentWalletMnemonic" style="display: block; word-break: break-all; font-size: 14px; color: #333; background: white; padding: 10px; border-radius: 4px;">-</code>
              <button class="action-button copy-button" id="copyCurrentMnemonicBtn" style="margin-top: 10px; padding: 8px 16px; font-size: 12px;">ğŸ“‹ Copy Seed</button>
            </div>
          </div>
        </div>
        <div class="wallet-actions-row" style="display: flex; gap: 10px; flex-wrap: wrap; margin-top: 20px;">
          <button class="action-button secondary-button" id="loadAnotherWalletBtn">
            ğŸ”„ Load Another Wallet
          </button>
          <button class="action-button primary-button" id="goToHomeBtn" style="background: #28a745;">
            ğŸ  Ir para Home
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- Wallet Selection Section -->
  <section class="content-section" id="walletSelectionSection">
    <div class="content-wrapper">
      <h2>Select Wallet</h2>
      <div id="walletSelectionContainer">
        <!-- Wallet list will be populated here by JavaScript -->
      </div>
      <div class="create-new-section">
        <button class="action-button secondary-button" id="showCreateOptionsBtn">
          â• Create New Wallet or Import
        </button>
      </div>
    </div>
  </section>
  <!-- Create/Import Wallet Section -->
  <section class="content-section" id="createImportSection" style="display: none;">
    <div class="content-wrapper">
      <h2>Manage HD Wallet</h2>
      <div class="back-to-selection">
        <button class="action-button secondary-button" id="backToSelectionBtn" style="display: none;">
          â† Back to Selection
        </button>
      </div>
      <div class="wallet-actions">
        <div class="action-group">
          <h3>Create New Wallet</h3>
          <p>Generate a new seed phrase with secure entropy based on current Bitcoin block.</p>
          <div class="form-group">
            <label for="wordCount">Seed Phrase Length:</label>
            <select id="wordCount">
              <option value="12" selected>12 words (recommended)</option>
              <option value="24">24 words (extra security)</option>
            </select>
          </div>
          <div class="form-group">
            <label for="generatePassword">BIP39 Passphrase (13th/25th word - optional):</label>
            <input type="password" id="generatePassword" placeholder="Leave empty for standard wallet" />
            <small style="color: #6c757d; display: block; margin-top: 5px;">
              This passphrase extends your seed phrase for additional security. Different passphrases create different wallets from the same seed.
            </small>
          </div>
          <div class="form-group">
            <label for="generateWalletId">Wallet ID (optional):</label>
            <input type="text" id="generateWalletId" placeholder="Auto-generated if left empty" />
          </div>
          <button class="action-button generate-button" id="generateWalletBtn">
            ğŸ”„ Generate New Wallet
          </button>
        </div>
        
        <div class="action-group">
          <h3>Import Existing Wallet</h3>
          <div class="form-group">
            <label for="importMnemonic">Seed Phrase (12 words):</label>
            <textarea id="importMnemonic" placeholder="word1 word2 word3..." rows="3"></textarea>
          </div>
          <div class="form-group">
            <label for="importPassphrase">Passphrase (optional):</label>
            <input type="password" id="importPassphrase" placeholder="Additional passphrase (BIP39)" />
          </div>
          <div class="form-group">
            <label for="importPassword">Encryption Password (optional):</label>
            <input type="password" id="importPassword" placeholder="Leave empty to save unencrypted" />
          </div>
          <div class="form-group">
            <label for="importWalletId">Wallet ID (optional):</label>
            <input type="text" id="importWalletId" placeholder="Auto-generated if left empty" />
          </div>
          <button class="action-button import-button" id="importWalletBtn">
            ğŸ“¥ Import Wallet
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- Seed Display Section -->
  <section class="content-section" id="seedSection" style="display: none;">
    <div class="content-wrapper warning-section">
      <h2>âš ï¸ Generated Seed Phrase</h2>
      <div style="background: #fff3cd; padding: 20px; border-radius: 8px; margin: 20px 0; border: 2px solid #ffeaa7;">
        <p><strong>ATTENTION:</strong> This is your seed phrase. Keep it safe and NEVER share it.</p>
        <p>Without it, you will permanently lose access to your funds!</p>
      </div>
      
      <div class="seed-display" id="seedDisplay">
        <!-- Seed words will be displayed here -->
      </div>

      <!-- Universal Wallet Information -->
      <div class="universal-wallet-info" id="universalWalletInfo" style="display: none;">
        <h3>ğŸŒ Universal Wallet Generated</h3>
        <div class="wallet-features">
          <div class="feature-badge">âœ… Multi-Chain Addresses</div>
          <div class="feature-badge">âš¡ LND Compatible</div>
          <div class="feature-badge">ğŸ”‘ Single Seed Phrase</div>
        </div>
        
        <!-- Chain Addresses -->
        <div class="chain-addresses">
          <h4>Generated Addresses</h4>
          <div id="chainAddressesList" class="addresses-grid">
            <!-- Chain addresses will be populated here -->
          </div>
        </div>
        
        <!-- LND Configuration -->
        <div class="lnd-configuration">
          <h4>âš¡ Lightning Network (LND) Configuration</h4>
          <div class="lnd-keys-section">
            <div class="lnd-key-display">
              <label>Extended Master Key:</label>
              <div class="key-container">
                <code id="lndExtendedKey" class="extended-key">-</code>
                <button class="copy-btn" id="copyLndKeyBtn" title="Copy LND key">ğŸ“‹</button>
              </div>
            </div>
            <div class="lnd-automation">
              <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                <button class="action-button lnd-button" id="autoConfigureLndBtn">
                  âš¡ Auto-Configure LND Wallet
                </button>
              </div>
              <div class="automation-status" id="lndAutomationStatus" style="display: none;">
                <div class="status-message" id="lndStatusMessage">Configuring LND...</div>
                <div class="status-progress">
                  <div class="progress-bar" id="lndProgressBar"></div>
                </div>
              </div>
              <div class="lnd-output-container" id="lndOutputContainer" style="display: none; margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px; border: 2px solid #007bff;">
                <h5 style="margin-bottom: 10px; color: #007bff; display: flex; align-items: center; gap: 8px;">
                  <span style="font-size: 18px;">ğŸ“‹</span> 
                  <span>Expect Script Execution Output</span>
                </h5>
                <textarea id="lndScriptOutput" readonly style="width: 100%; min-height: 250px; max-height: 400px; background: #0d1117; color: #58a6ff; font-family: 'Courier New', 'Monaco', monospace; padding: 15px; border-radius: 6px; border: 2px solid #30363d; font-size: 13px; line-height: 1.5; resize: vertical; box-shadow: inset 0 2px 5px rgba(0,0,0,0.3);"></textarea>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Elements/Liquid Configuration -->
        <div class="elements-configuration">
          <h4>ğŸ’§ Liquid Network (Elements) Configuration</h4>
          <div class="elements-keys-section">
            <div class="elements-key-display">
              <label>Liquid Address:</label>
              <div class="key-container">
                <code id="elementsAddress" class="extended-key">-</code>
                <button class="copy-btn" id="copyElementsAddressBtn" title="Copy Liquid address">ğŸ“‹</button>
              </div>
            </div>
            <div class="elements-automation">
              <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                <button class="action-button elements-button" id="autoConfigureElementsBtn">
                  ğŸ’§ Auto-Configure Liquid Wallet
                </button>
              </div>
              <div class="automation-status" id="elementsAutomationStatus" style="display: none;">
                <div class="status-message" id="elementsStatusMessage">Configuring Elements...</div>
                <div class="status-progress">
                  <div class="progress-bar" id="elementsProgressBar"></div>
                </div>
              </div>
              <div class="elements-output-container" id="elementsOutputContainer" style="display: none; margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px; border: 2px solid #00d2ff;">
                <h5 style="margin-bottom: 10px; color: #00d2ff; display: flex; align-items: center; gap: 8px;">
                  <span style="font-size: 18px;">ğŸ“‹</span> 
                  <span>Elements Integration Output</span>
                </h5>
                <textarea id="elementsScriptOutput" readonly style="width: 100%; min-height: 250px; max-height: 400px; background: #0d1117; color: #00d2ff; font-family: 'Courier New', 'Monaco', monospace; padding: 15px; border-radius: 6px; border: 2px solid #30363d; font-size: 13px; line-height: 1.5; resize: vertical; box-shadow: inset 0 2px 5px rgba(0,0,0,0.3);"></textarea>
              </div>
            </div>
          </div>
        </div>
        
        <!-- TRON Configuration -->
        <div class="tron-configuration">
          <h4>ğŸ”´ TRON Network Configuration</h4>
          <div class="tron-keys-section">
            <div class="tron-key-display">
              <label>TRON Address:</label>
              <div class="key-container">
                <code id="tronAddress" class="extended-key">-</code>
                <button class="copy-btn" id="copyTronAddressBtn" title="Copy TRON address">ğŸ“‹</button>
              </div>
            </div>
            <div class="tron-automation">
              <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                <button class="action-button tron-button" id="autoConfigureTronBtn">
                  ğŸ”´ Auto-Configure TRON Wallet
                </button>
              </div>
              <div class="automation-status" id="tronAutomationStatus" style="display: none;">
                <div class="status-message" id="tronStatusMessage">Configuring TRON...</div>
                <div class="status-progress">
                  <div class="progress-bar" id="tronProgressBar"></div>
                </div>
              </div>
              <div class="tron-output-container" id="tronOutputContainer" style="display: none; margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px; border: 2px solid #ff0013;">
                <h5 style="margin-bottom: 10px; color: #ff0013; display: flex; align-items: center; gap: 8px;">
                  <span style="font-size: 18px;">ğŸ“‹</span> 
                  <span>TRON Integration Output</span>
                </h5>
                <textarea id="tronScriptOutput" readonly style="width: 100%; min-height: 250px; max-height: 400px; background: #0d1117; color: #ff0013; font-family: 'Courier New', 'Monaco', monospace; padding: 15px; border-radius: 6px; border: 2px solid #30363d; font-size: 13px; line-height: 1.5; resize: vertical; box-shadow: inset 0 2px 5px rgba(0,0,0,0.3);"></textarea>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="seed-actions">
        <button class="action-button copy-button" id="copySeedBtn">
          ğŸ“‹ Copy Seed
        </button>
        <button class="action-button confirm-button" id="confirmSeedBtn">
          âœ… I've Saved It Securely - Continue
        </button>
      </div>
    </div>
  </section>

  <!-- Mnemonic Verification Section -->
  <section class="content-section" id="verificationSection" style="display: none;">
    <div class="content-wrapper">
      <h2>ğŸ” Verify Your Seed Phrase</h2>
      <div style="background: #e3f2fd; padding: 20px; border-radius: 8px; margin: 20px 0; border: 2px solid #90caf9;">
        <p><strong>Security Check:</strong> Please confirm some words from your seed phrase in the correct positions.</p>
        <p>This ensures you have properly saved your seed phrase.</p>
      </div>
      
      <div class="verification-container" id="verificationContainer">
        <!-- Verification inputs will be populated here -->
      </div>
      
      <div class="verification-actions">
        <button class="action-button secondary-button" id="backToSeedBtn">
          â† Back to Seed
        </button>
        <button class="action-button" id="skipVerificationBtn" style="background: #ffc107; color: #000;">
          â© Skip Verification
        </button>
        <button class="action-button confirm-button" id="verifyWordsBtn">
          âœ… Verify and Save Wallet
        </button>
      </div>
    </div>
  </section>



  <!-- Password Input Modal -->
  <div id="passwordModal" class="password-modal" style="display: none;">
    <div class="password-modal-content">
      <h3>ğŸ” Load Wallet</h3>
      <div class="password-modal-body">
        <p>If this wallet is encrypted, enter the password. If not encrypted, leave blank and click Load.</p>
        <div class="form-group">
          <label for="modalPassword">Password (if encrypted):</label>
          <input type="password" id="modalPassword" placeholder="Enter password or leave blank" autocomplete="off" />
        </div>
        <div class="wallet-id-info">
          <span>Wallet ID: </span>
          <span id="modalWalletId">-</span>
        </div>
      </div>
      <div class="password-modal-actions">
        <button class="action-button secondary-button" id="cancelPasswordBtn">Cancel</button>
        <button class="action-button primary-button" id="confirmPasswordBtn">Load Wallet</button>
      </div>
    </div>
  </div>

  <!-- Footer da AssociaÃ§Ã£o -->
  <div class="association-footer-placeholder"></div>
  
  </div>

  <!-- Scripts -->
  <script>
    // Carregar footer da associaÃ§Ã£o
    fetch('../association-footer.html')
      .then(response => response.text())
      .then(data => {
        document.querySelector('.association-footer-placeholder').innerHTML = data;
      })
      .catch(error => console.error('Erro ao carregar footer:', error));
  </script>
  <script src="js/main.js"></script>
</body>
</html>